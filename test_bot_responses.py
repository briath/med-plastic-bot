#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ –±–æ—Ç–∞
"""

import asyncio
import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ –ø—É—Ç—å
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from services.openai_service import openai_service
from services.website_content_service import website_content_service


async def test_bot_responses():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤ –∫ –±–æ—Ç—É"""
    
    print("ü§ñ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –±–æ—Ç–∞...\n")
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã
    test_questions = [
        # –í–æ–ø—Ä–æ—Å—ã –æ –±–ª–µ—Ñ–∞—Ä–æ–ø–ª–∞—Å—Ç–∏–∫–µ (–¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç —Å–∞–π—Ç–∞)
        "–ß—Ç–æ —Ç–∞–∫–æ–µ –±–ª–µ—Ñ–∞—Ä–æ–ø–ª–∞—Å—Ç–∏–∫–∞?",
        "–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –ø–ª–∞—Å—Ç–∏–∫–∞ –≤–µ—Ä—Ö–Ω–∏—Ö –≤–µ–∫?",
        "–ö–∞–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–∞ –≤–µ–∫–∞—Ö?",
        
        # –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã (–¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GPT)
        "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?",
        "–¢—ã –∫—Ç–æ?",
        "–†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –≥—Ä—É–¥–∏",
        "–ö–∞–∫–∏–µ —Ä–∏—Å–∫–∏ –≤ –ø–ª–∞—Å—Ç–∏—á–µ—Å–∫–æ–π —Ö–∏—Ä—É—Ä–≥–∏–∏?",
        
        # –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏ –æ–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã (–Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã)
        "–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 2+2?",
        "–ö–∞–∫–∞—è —Å—Ç–æ–ª–∏—Ü–∞ –†–æ—Å—Å–∏–∏?",
        "–†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ –ø–æ–≥–æ–¥—É —Å–µ–≥–æ–¥–Ω—è",
        "–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–µ–æ—Ä–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏?",
        
        # –°–º–µ—à–∞–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
        "–°—Ä–∞–≤–Ω–∏ –±–ª–µ—Ñ–∞—Ä–æ–ø–ª–∞—Å—Ç–∏–∫—É –∏ –ø–ª–∞—Å—Ç–∏–∫—É –≤–µ–∫",
        "–ß—Ç–æ –ª—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞?"
    ]
    
    for i, question in enumerate(test_questions, 1):
        print(f"üìù –í–æ–ø—Ä–æ—Å {i}: {question}")
        
        try:
            # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç –±–æ—Ç–∞
            context = {'history': []}  # –ü—É—Å—Ç–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–ª—è —Ç–µ—Å—Ç–∞
            response = await openai_service.generate_response(question, context)
            
            if response:
                print(f"‚úÖ –û—Ç–≤–µ—Ç: {response}")
                
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç —Å–∞–π—Ç–∞
                website_content = await website_content_service.get_relevant_content_for_query(question)
                if website_content:
                    print("üåê –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –∫–æ–Ω—Ç–µ–Ω—Ç —Å —Å–∞–π—Ç–∞")
                else:
                    print("ü§ñ –û—Ç–≤–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω GPT")
            else:
                print("‚ùå –ù–µ—Ç –æ—Ç–≤–µ—Ç–∞")
                
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        
        print("-" * 50)
    
    print("\nüéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!")


if __name__ == "__main__":
    asyncio.run(test_bot_responses())
