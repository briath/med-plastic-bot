#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã
"""

import asyncio
import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ –ø—É—Ç—å
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from services.openai_service import openai_service


async def test_geography_questions():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏"""
    
    print("üåç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤...\n")
    
    # –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã
    test_questions = [
        "–ö–∞–∫–∞—è —Å—Ç–æ–ª–∏—Ü–∞ —É –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞?",
        "–ö–∞–∫–∞—è –ø–ª–æ—â–∞–¥—å –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞?",
        "–ö–∞–∫–∞—è —Å—Ç–æ–ª–∏—Ü–∞ —É –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω–∞?",
        "–ö–∞–∫–æ–µ –Ω–∞—Å–µ–ª–µ–Ω–∏–µ –≤ –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω–µ?",
        "–ö–∞–∫–∞—è —Å—Ç–æ–ª–∏—Ü–∞ —É –¢—É—Ä–∫–º–µ–Ω–∏—Å—Ç–∞–Ω–∞?",
        "–ö–∞–∫–∞—è —Å—Ç–æ–ª–∏—Ü–∞ —É –†–æ—Å—Å–∏–∏?",
        "–ö–∞–∫–∞—è –ø–ª–æ—â–∞–¥—å –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞?",
    ]
    
    for i, question in enumerate(test_questions, 1):
        print(f"üìù –í–æ–ø—Ä–æ—Å {i}: {question}")
        
        try:
            # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç –±–æ—Ç–∞
            context = {'history': []}  # –ü—É—Å—Ç–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–ª—è —á–∏—Å—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞
            response = await openai_service.generate_response(question, context)
            
            if response:
                print(f"‚úÖ –û—Ç–≤–µ—Ç: {response}")
                
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤ –æ—Ç–≤–µ—Ç–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–ª–∞—Å—Ç–∏—á–µ—Å–∫–æ–π —Ö–∏—Ä—É—Ä–≥–∏–∏
                if "–ø–ª–∞—Å—Ç–∏–∫" in response.lower() or "—Ö–∏—Ä—É—Ä–≥" in response.lower() or "–ø—Ä–æ—Ü–µ–¥—É—Ä" in response.lower():
                    print("‚ùå –ü–†–û–ë–õ–ï–ú–ê: –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–ª–∞—Å—Ç–∏—á–µ—Å–∫–æ–π —Ö–∏—Ä—É—Ä–≥–∏–∏!")
                else:
                    print("‚úÖ –û—Ç–≤–µ—Ç —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω –Ω–∞ –≤–æ–ø—Ä–æ—Å–µ")
            else:
                print("‚ùå –ù–µ—Ç –æ—Ç–≤–µ—Ç–∞")
                
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        
        print("-" * 60)
    
    print("\nüéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!")


if __name__ == "__main__":
    asyncio.run(test_geography_questions())
